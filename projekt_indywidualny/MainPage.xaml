<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:sf="clr-namespace:Syncfusion.Maui.Charts;assembly=Syncfusion.Maui.Charts"
             xmlns:local="clr-namespace:MobileApp"
             x:Class="MobileApp.MainPage">

    <ScrollView>
        <VerticalStackLayout
            Padding="30,0"
            Spacing="25"
            VerticalOptions="Center">

            <sf:SfCircularChart x:Name="chart">
                <sf:SfCircularChart.Legend>
                    <sf:ChartLegend 
                        Placement="Right"/>
                </sf:SfCircularChart.Legend>
                <sf:SfCircularChart.Series>
                    <sf:PieSeries
                        ItemsSource="{Binding ChartData}"
                        XBindingPath="Name"
                        YBindingPath="Value"
                        ShowDataLabels="True"
                        DataLabelSettings="{Binding DataLabelSettings}"/>
                </sf:SfCircularChart.Series>
            </sf:SfCircularChart>

            <Label x:Name="MonthlyExpenseLabel"            
            FontSize="18" 
            HorizontalOptions="Center"/>

            <Label x:Name="YearlyExpenseLabel"
            FontSize="18"
            HorizontalOptions="Center"/>

            <Grid x:Name="CategorySummaryGrid"
            ColumnDefinitions="*,*"
            Padding="0,10"
            RowSpacing="5" />

            <SearchBar Placeholder="Search by name"
           TextChanged="OnSearchTextChanged"
           x:Name="SearchBar" />

            <Picker Title="Sort by"
            x:Name="SortPicker"
            SelectedIndexChanged="OnSortPickerChanged">
                <Picker.Items>
                    <x:String>None</x:String>
                    <x:String>Name (A-Z)</x:String>
                    <x:String>Name (Z-A)</x:String>
                    <x:String>Value (Low → High)</x:String>
                    <x:String>Value (High → Low)</x:String>
                </Picker.Items>
            </Picker>

            <ListView x:Name="ExpenseListView"
              ItemsSource="{Binding ChartData}"
              SelectionMode="None">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <TextCell Text="{Binding Name}"
                      Detail="{Binding Value, StringFormat='{0} $'}" 
                      Command="{Binding BindingContext.ShowItemDetailsCommand, Source={x:Reference Name=ExpenseListView}}"
                      CommandParameter="{Binding .}" />
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>



            <Button
                x:Name="CounterBtn"
                Text="Add new" 
                SemanticProperties.Hint="Counts the number of times you click"
                Clicked="OnCounterClicked"
                HorizontalOptions="Fill" />
        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
